function topicsPage(){if(!(0>currentTotal)){currentIndex>-1&&showLoading(),Waypoint.destroyAll(),currentIndex++;var a=10,b="/api/topics/pages/"+currentIndex,c=doT.template($("#topic-tpl").text());$.get(b,function(b){var d=c(b),e=$("#topics-area");$(d).hide().appendTo(e).fadeIn(1e3),closeLoading(),currentTotal=parseInt(b.total),(currentIndex+1)*a>currentTotal&&(currentTotal=-1);var f={offset:"bottom-in-view",context:$("#container")};$("#bottom-area").waypoint(function(){topicsPage()},f)})}}function iZanIt(a){var b=$("#zan"+a),c="/api/topics/"+a+"/zans",d="animated bounceIn";b.css("color","#e84034"),b.addClass(d),$(b).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$.post(c,function(c){b.addClass("active");var e=$("#zan-count-"+a);$("#zan"+a+" > a").attr("href",'javascript:iCancelZanIt("'+a+'");'),e.html(c.result),b.removeClass(d)})})}function iCancelZanIt(a){var b=$("#zan"+a),c="/api/topics/"+a+"/zans/cancel",d="animated bounceIn";b.css("color","#e84034"),b.addClass(d),$(b).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$.post(c,function(c){b.removeClass("active");var e=$("#zan-count-"+a);$("#zan"+a+" > a").attr("href",'javascript:iZanIt("'+a+'");'),e.html(c.result),b.removeClass(d)})})}$(document).ready(function(){activeToolbarItem("btn-topics"),topicsPage()});var currentIndex=-1,currentTotal=10;